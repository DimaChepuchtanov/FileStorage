
### Описание проекта "FileStorage"

Проект  **FileStorage**  представляет собой веб-приложение для безопасного хранения и управления файлами. Основные возможности:

-   Загрузка и удаление файлов.
    
-   Аутентификация пользователей через JWT-токены.
    
-   Хранение метаданных файлов в PostgreSQL.
    
-   Использование облачного хранилища для файлов.
    
-   API, построенный на  **FastAPI**, с документацией Swagger/OpenAPI.
    

----------

### Используемые технологии и методы

1.  **Backend**:
    
    -   **FastAPI**: для создания REST API.
        
    -   **SQLAlchemy**: ORM для работы с PostgreSQL.
        
    -   **JWT**: аутентификация пользователей.
        
    -   **Pydantic**: валидация данных.
        
2.  **Хранение файлов**:
    
    -   **Локальное хранилище**   для файлов.
        
    -   **PostgreSQL**: для хранения метаданных (название, размер, владелец).
        
3.  **Инфраструктура**:
    
    -   **Docker**: контейнеризация приложения.
        
    -   **Docker Compose**: оркестрация сервисов (приложение + БД).
        

----------

### Инструкция по развертыванию в Docker

#### 1. Предварительные требования

-   Установите  [Docker](https://docs.docker.com/get-docker/)  и  [Docker Compose](https://docs.docker.com/compose/install/).
    
-   Клонируйте репозиторий:
    ```bash
    git clone https://github.com/DimaChepuchtanov/FileStorage.git
    cd FileStorage
    ```
   
#### 2. Настройка переменных окружения

Создайте файл  `.env`  в корне проекта и запросите у автора следующие данные:

```bash
DATABASE_URL=
YANDEX_CLIENT_ID=
YANDEX_CLIENT_SECRET=
```
#### 3. Запуск приложения

Соберите и запустите контейнеры:

```bash
docker-compose up --build -d
```
После запуска:

-   Приложение будет доступно по адресу:  `http://localhost:8000`.
    
-   Документация API:  `http://localhost:8000/docs`.
    
-   PostgreSQL будет доступна на порту  `5432`.
    

----------

### Основные endpoints API

1.  **Аутентификация**:
    
    -   `GET /login`: получение JWT-токена.
        
    -   `GET /update-token`: обновление токена.
        
2.  **Работа с файлами**:
    
    -   `PUT /audio/upload`: загрузка файла.
        
    -   `DELETE /audio/delete`: удаление файла.
        
    -   `GET /audio`: список файлов пользователя.
  
----------

### Важные замечания

1.  **Доступы к работе**:
    - Система не работает пока вы не получите свой токен.
    - Для начала работы необходимо зайти по ссылке `http://localhost:8000/login`, после чего вы будете направлены на страничку `/docs`.
    - Во время работы по адресу `/docs` указывать токен можно любой, основной зашит в cookie.
    - Если токен перестает быть валидным (Invalid Token) нужно или через `/docs` или вручную `http://localhost:8000/update-token` произвести обновление токена.
    - При удалении пользователя, токен становиться не валидным, однако пользователь его может обновить через повторную авторизацию.
    - Сохранение файлов происходит по строгому пути, и в личной папке пользователя (при удалении пользователя, папка удаляется)
        
2.  **Доступ к облачному хранилищу**:
    
    -   Убедитесь, что в  `.env`  указаны корректные ключи доступа (запросите их у автора).
        
3.  **Тестирование**:
    
    -   Используйте Swagger (`/docs`) для проверки работы API.
        

----------

Если возникнут проблемы, свяжитесь с автором для получения недостающих ключей и конфигураций.
